var SOLO = {};


SOLO.levels = [
	['77553344', '7755334', '33447755', '3447755'],
	['0888888', '022222', '003333', '0003', '00033', '0006', '00066'],
	['008008', '00828', '00023', '00232', '00036', '00464', '00064', '0004'],
	['00011', '00612', '004627', '054078', '0850085', '7800054', '27000046', '2000006'],
	['001111', '012221', '0121121', '012221', '001111', '00808', '008888'],
	['0555777', '5000007', '0500007', '5342347', '0423423'],
	['0555777', '5000007', '0500007', '5342347', '0423423', '034234'],
	['0110033', '060004', '010007', '040001', '050006', '030004', '030002', '040005'],
	['40000004', '7435743', '50000005', '3574357', '0007', '0004'],
	['03020203', '2303202', '2020303', '3202303', '03030303', '2303202', '2020302', '3302203', '03020202'],
	['0880066', '2000005', '32000054', '3000004', '23000045', '2000005', '82000056', '8800066'],
	['88000066', '2600085', '32000054', '3000004', '26000085', '2000005', '82000056', '8600086'],
	['00011', '00612', '004627', '054373', '0858335', '7884454', '27222446', '2200006'],
	['001001', '044044', '0131131', '044044', '001001'],
	['00022', '00333', '004444', '055555', '0666666', '0007', '00088', '0001'],
	['00036', '054', '78063', '000045', '00036087', '054', '78063', '000045', '00000087'],
	['00066', '0004', '0002', '0008', '0003', '0005', '0006', '0004'],
	['00012', '001388', '000128', '01111', '011122', '111222', '011222', '011188', '0088'],
	['02', '2', '0345876', '0000002', '0000002', '034587', '02', '2', '0345876'],
	['07', '6', '34587634', '0000005', '0000008', '054367', '08', '7', '6345876'],
	['43211234', '4321234', '54322345', '5432345', '65433456', '6543456', '76544567', '7654567', '87655678'],
	['00066', '0004', '00035', '0007', '00035', '030605', '21212121', '4040307'],
	['00002', '8546', '7002', '0006458', '70002007', '8546', '00020007', '0006458'],
	['0000847', '0048474', '0068474', '078478', '088472', '48474', '67382'],
	['60000006', '6077706', '0650056', '040004', '0710017', '040004', '005005', '00777'],
	['0810018', '8010108', '82011028', '8231328', '87433478', '8043408', '0884488', '0004'],
	['04020807', '6080807', '7010604', '030206', '050405', '30403', '00507', '0006'],
	['00002', '00004', '72423252', '00007', '00052', '00204', '00032', '00005', '00072', '0007'],
	['00065', '00521', '00034', '025033', '0423625', '053015'],
	['00002', '0002', '0300206', '6002001', '0700205', '010206', '006612'],
	['00074', '00437', '003743', '074374', '0437437', '3743743', '74374374'],
	['77777777', '5', '04368754', '06', '00875436', '005', '00043687'],
	['20800703', '7020724', '0508308', '380005', '70461308', '2000002', '0256862'],
	['77700777', '00707', '003443', '040604', '006446', '00727', '0530035'],
	['00066', '006', '04577006', '4457606', '4347766', '4457606', '04577006', '006', '00066'],
	['20000002', '2033302', '0234432', '7340437', '73400437', '7340437', '44488444', '1613161'],
	['00888', '08338', '086668', '888888', '00707', '07007', '07550755'],
	['0440444', '4865764', '24440442', '3232323', '24404442', '4675684', '34440443', '2233322'],
	['076', '424', '067', '0064', '00727', '0046', '000047', '000676', '000074'],
	['74856274', '6274856', '74856274'],
	['00000055', '0088855', '00000055', '020008', '022008', '44408', '40344404', '0304044', '03'],
	['005', '085', '0085', '0585', '2222222', '232322', '33333333'],
	['10000007', '7254861', '10000007', '7254861', '10000007', '7254861'],
	['44577544', '1457542', '62455412', '1245421', '32744112', '1454726', '72375113'],
	['77000055', '5100047', '17000053', '8000008', '55000067', '7588675', '0875758', '010808'],
	['0600005', '060005', '006775', '00303', '11700722', '00303', '008774', '080004', '0800004'],
	['0700003', '2822242', '005225', '024282', '00037', '00262'],
	['88888888', '8000008', '80031633', '8000147', '80000051', '66', '5473', '1315'],
	['002002', '05006', '0800222', '700008', '222205', '006', '001', '04', '02'],
	['0880088', '7050507', '60044006', '7000007', '0800008', '050005', '004004', '00303', '00066'],
	['0110011', '8577754', '67773774', '8577754', '0110011'],
	['00000888', '0000388', '01888088', '7888', '70008888', '7', '5333504', '5555444'],
	['50080708', '8780085', '008008', '0111114', '00133175', '0011124', '00011045', '0007067', '00000021'],
	['0600006', '1001001', '11133111', '1001001', '0804008', '0047', '0007', '047', '04'],
	['00076', '00374', '006582', '073345', '004847', '00243', '00056', '0005'],
	['88033077', '7007004', '3002003', '6004003', '2003002', '6003003', '7002008', '6006005'],
	['00077', '015551', '00077', '00383', '00077', '016661', '00044'],
	['00524', '02002', '0052452', '0245005', '0400452', '024524', '0052'],
	['0750436', '1000002', '0346057', '1000002', '0570364', '1000002', '0634057'],
	['00077', '00875', '0328524', '3222224', '0333444', '0006', '00034', '0006', '003344'],
	['50600407', '3040305', '50021007', '7034605', '50012007', '3060405', '50400307', '7000005'],
	['37166245', '2003001', '50047003', '0001', '00025', '0003', '00074', '0006', '00052'],
	['00006224', '1621644', '62162162', '1621627', '00002762', '0000627', '00002162', '0000621'],
	['01840033', '0184003', '01840033', '0184042', '01840756', '0184081', '01840345', '0184067', '00000812'],
	['0008888', '4560008', '30000004', '8000005', '80004567', '8003123', '70004567', '12', '345', '671'],
	['0800003', '2200044', '0300005', '4400066', '0500007', '6600022', '0700008'],
	['0500005', '3002003', '60011006', '6002007', '0538865', '0007', '00044', '0008'],
	['0200345', '300415', '500342', '40541', '500362', '405615'],
	['30022003', '3044403', '0305503', '088188', '00055', '00686', '74375347', '6000002'],
	['53468247', '2002002', '41243546', '5005005', '06006006', '1431561', '07007007', '8008008'],
	['065022', '605202', '1000001', '1750053', '05463747', '0370065'],
	['00077', '00665', '002775', '028364', '0383264', '3242538', '0424538', '046677'],
	['0084', '0287', '048626', '8813515', '82576768', '2882882'],
	['002002', '067267', '0223322', '5821285', '0486864', '022222'],
	['50006005', '7787056', '53863375', '0052063', '06388085', '5765053', '0005052', '1116', '00001111'],
	['200011', '300121', '4001331', '5012221', '6001551', '700555', '800055', '000121', '0001221'],
	['0040028', '0850054', '200131', '6504', '5047227', '0200502', '0860004', '004'],
	['20002', '30003', '040044', '050505', '060066', '700828', '800077'],
	['30070362', '6050505', '70040004', '5310006', '0007047', '00606', '00040536'],
	['70005004', '1400701', '0080204', '805803', '63432704', '0015465', '087001', '5400053', '1000007'],
	['72362741', '0000005', '1638273', '4', '78751637', '0000002', '7251734', '1', '01564871'],
	['00012', '00181', '002331', '018181', '0708807', '5277752', '0608806'],
	['00067', '00444', '008648', '040704', '30048002', '3304022', '0136721', '0004', '00048'],
	['0700003', '037171', '01', '7', '04431711', '0700001', '0007137', '031'],
	['18', '26', '836', '745', '6655', '4464', '23364', '21187', '446687'],
	['003773', '032213', '0343313', '3436383', '35363831', '3537731', '03633383', '0367783', '0033333'],
	['001001', '2112112', '28866882', '4303034', '48077084', '8007008', '55600655'],
	['0740047', '7030307', '30122103', '6108016', '0607706', '8250528', '80500508', '3100013', '0300003'],
	['72000051', '3866684', '72000051', '3688864', '72000051', '3177714', '72000051'],
	['60022006', '6050506', '0350053', '8300038', '10155101', '8300038', '0340043', '6040406', '60077006'],
	['33000066', '6000003', '60000003', '2026204', '63642363', '3160316', '0480048', '00316'],
	['17634528', '00002', '00022', '002', '82543671', '00002', '00022', '002', '17634528'],
	['002002', '035035', '0347643', '076076', '00088', '0008', '20088004', '3008003', '0456752'],
	['20033003', '2484853', '0270073', '7084807', '0530024', '00372', '0544554'],
	['00067', '0004', '00023', '0005', '00068', '0003', '76543286'],
	['010203', '050607', '080103', '070407', '020203', '040601', '030507', '040708'],
	['22334455', '6678766', '75443327', '5768742'],
	['85023058', '6603055', '0608805', '2178713', '0306402', '2200033', '72500537', '6400046'],
	['26211262', '2360632', '47233274', '5450545', '45766754', '1340431', '34266243'],
	['41386876', '7020302', '0751456', '060205', '0846764', '2030503', '75577662']
];	



SOLO.init = function() {
	document.getElementById('slot0').onclick = function() {
		SOLO.start();
	}
}


SOLO.start = function() {
	document.getElementById('popup-game').classList.toggle('popup-show'); // Show

	addKeyListener();
	var demo = new ZEPR.Engine(640, 480, sessionStorage.sound == 'true');
	demo.setLoader(new LoaderScreen());
	
	demo.onLeave(function() {
		document.getElementById('popup-game').classList.toggle('popup-show'); // Hide
	});
	
	ZEPR.Events.addTouchListener(demo);
	ZEPR.context.set('fbnet', new SOLO.Net(demo));

	demo.start(new GameScreen({
		players: [{ token: '1', type: 'player', name: 'Joueur 1'}],
		pattern: SOLO.levels
	}));    
}


SOLO.Net = function(_zepr) {
   	this.token = null;
	this.callback = null;
	this.zepr = _zepr;
}

SOLO.Net.prototype = {
   	setCallback: function(_callback) {
		this.callback = _callback;
	},
	
	sendMessage : function(_msg) {
		if (_msg.hasOwnProperty('cmd') && _msg.cmd == 'lost') {
			if (this.callback) {
				this.callback({
					cmd: 'defeat', 
					token: '1'
				});
			}
		}
	}
}

window.addEventListener('load', SOLO.init, false);